# Migration `20200504171956-add-json-fields`

This migration has been generated by Ian Mitchell at 5/4/2020, 5:19:56 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Analytic" ADD COLUMN "context" jsonb  NOT NULL ;

ALTER TABLE "public"."GuildSnapshot" ADD COLUMN "snapshot" jsonb  NOT NULL ;

ALTER TABLE "public"."Service" ADD COLUMN "values" jsonb  NOT NULL ;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200502181802-create_database..20200504171956-add-json-fields
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -17,11 +17,11 @@
 model Karma {
   id        Int      @default(autoincrement()) @id
   guildId   String
+  userId    String
   karma     Int      @default(0)
   lastUsage DateTime @default(now())
-  userId    String
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
   @@unique([guildId, userId])
@@ -39,10 +39,9 @@
 model Service {
   id        Int      @default(autoincrement()) @id
   userId    String
   name      String
-  // TODO: JSON field
-  // values
+  values    Json
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
   @@unique([userId, name])
@@ -67,10 +66,9 @@
 }
 model GuildSnapshot {
   id        Int      @default(autoincrement()) @id
-  // TODO: JSON field
-  // snapshot
+  snapshot  Json
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
 }
@@ -124,9 +122,8 @@
   id        Int      @default(autoincrement()) @id
   action    String
   category  String
   label     String
-  // TODO: JSON field
-  // context
+  context   Json
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
 }
```


