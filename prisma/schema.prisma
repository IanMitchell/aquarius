datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Karma {
  id        Int      @id @default(autoincrement())
  guildId   String
  userId    String
  karma     Int      @default(0)
  lastUsage DateTime @default(now())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([guildId, userId])
  @@index([guildId, userId])
  @@map("karma")
}

model Reply {
  id        Int      @id @default(autoincrement())
  guildId   String
  trigger   String
  response  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([guildId, trigger])
  @@index([guildId, trigger])
  @@map("replies")
}

model Quote {
  id        Int      @id @default(autoincrement())
  guildId   String
  quote     String
  quoteId   Int
  addedBy   String
  channel   String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([guildId, quoteId])
  @@index(guildId)
  @@map("quotes")
}

model Snapshot {
  id        Int      @id @default(autoincrement())
  snapshot  Json
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("snapshots")
}

model CommandConfig {
  id        Int            @id @default(autoincrement())
  command   EnabledCommand @relation(fields: [commandId], references: [id])
  commandId Int
  key       String
  value     String
  createdAt DateTime       @default(now())
  updatedAt DateTime       @updatedAt

  @@unique([commandId, key])
  @@map("command_configs")
}
